# 统一仪表盘设计方案

## 设计理念
将仪表盘和配置管理合并为一个功能完整的控制中心，用户无需在多个页面间切换即可完成所有操作。

## 页面布局

```
┌─────────────────────────────────────────────────────────────────┐
│  顶部导航栏（CompactLayout）                                       │
│  [🏠仪表盘] [🔗集成] [🛠️设置]                                      │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  【服务控制面板】- 紧凑横条                                          │
│  ● 运行中 · 配置名称 (127.0.0.1:25341)          [刷新] [停止]     │
└─────────────────────────────────────────────────────────────────┘

┌──────────────────┬──────────────────────────────────────────────┐
│  【分组列表】     │  【配置管理区域】                               │
│  4列宽           │  12列宽                                        │
│                  │                                                │
│  [📁 全部配置]   │  ┌──────────────────────────────────────────┐ │
│   (15个)         │  │ 快速操作：                                 │ │
│                  │  │ [当前分组: 默认] [+ 新建配置] [+ 新建分组] │ │
│  [📁 默认分组]   │  └──────────────────────────────────────────┘ │
│   (8个)          │                                                │
│   [编辑][删除]   │  ┌──────────────────────────────────────────┐ │
│                  │  │ 配置卡片 1                                 │ │
│  [📁 备用分组]   │  │ [信号图标] 配置名称  [Claude][合作伙伴]   │ │
│   (5个)          │  │ api.example.com                           │ │
│   [编辑][删除]   │  │ 延迟: 256ms | 余额: $10.50               │ │
│                  │  │ [测试][余额][编辑][删除][→切换]            │ │
│  [+ 新建分组]    │  └──────────────────────────────────────────┘ │
│                  │                                                │
│                  │  ┌──────────────────────────────────────────┐ │
│                  │  │ 配置卡片 2                                 │ │
│                  │  │ ...                                        │ │
│                  │  └──────────────────────────────────────────┘ │
│                  │                                                │
└──────────────────┴──────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  【自动切换设置】- 当前分组的自动切换配置                           │
│  自动切换: [✓] 已启用  |  延迟阈值: [3000]ms  [保存]              │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  【切换历史】- 最近5条                                             │
│  10:30  配置A → 配置B  [手动]                                     │
│  10:25  配置B → 配置C  [延迟]                                     │
└─────────────────────────────────────────────────────────────────┘
```

## 功能区域说明

### 1. 服务控制面板（顶部）
- 显示代理服务状态（运行中/已停止）
- 显示当前活跃配置和监听地址
- 快速启动/停止按钮
- 刷新状态按钮

### 2. 分组列表（左侧侧边栏，4列）
- "全部配置"按钮（显示所有配置）
- 分组卡片列表
  - 分组名称 + 配置数量
  - 编辑/删除按钮
  - 点击切换当前分组
- 新建分组按钮

### 3. 配置管理区域（右侧主区域，12列）
- **快速操作栏**
  - 当前选中的分组名称
  - 新建配置按钮
  - 新建分组按钮

- **配置卡片列表**（显示当前分组的配置）
  - WiFi信号图标（延迟状态）
  - 配置名称
  - 分类标签（Claude/OpenAI/等）
  - 合作伙伴标签
  - 可用性状态点
  - 服务器地址
  - 最后测试信息（延迟、时间）
  - 余额信息（如果启用）
  - 操作按钮：
    - **测试**: 测试连接延迟
    - **余额**: 查询账户余额
    - **编辑**: 编辑配置
    - **删除**: 删除配置
    - **→切换**: 立即切换到此配置（仅当代理运行中时显示）

### 4. 自动切换设置（配置列表下方）
- 显示当前分组的自动切换开关
- 延迟阈值设置
- 保存按钮

### 5. 切换历史（底部）
- 显示最近5条切换记录
- 时间 + 源配置 → 目标配置 + 原因标签

## 交互流程

### 启动代理
1. 确保至少有一个分组有可用配置
2. 点击"启动"按钮
3. 自动选择当前分组的最优配置
4. 更新服务状态面板

### 切换配置
1. 在配置卡片上点击"→切换"按钮
2. 立即切换到该配置
3. 更新服务状态面板和切换历史

### 管理配置
1. 点击"+ 新建配置"打开配置编辑器
2. 填写API Key、服务器地址等信息
3. 选择所属分组
4. 保存后立即显示在列表中

### 管理分组
1. 点击"+ 新建分组"打开分组编辑器
2. 填写分组名称、描述、自动切换设置
3. 保存后立即显示在分组列表中

### 测试和监控
1. 点击配置卡片的"测试"按钮
2. 显示加载动画
3. 测试完成后更新延迟信息和信号图标

## 优势

1. **一站式操作**: 所有功能集中在一个页面，无需切换
2. **清晰的视觉层次**: 左侧选择分组，右侧管理配置
3. **快速响应**: 服务控制和配置切换在最显眼的位置
4. **完整的监控**: 实时显示配置状态、延迟、余额等信息
5. **简洁高效**: 去除冗余，保留核心功能

## 实现要点

1. 使用 Grid 布局实现左右分栏（4:12）
2. 服务状态面板固定在顶部
3. 配置卡片使用信号图标显示延迟状态
4. 保留原配置管理的所有CRUD功能
5. 整合原仪表盘的快速切换和历史记录功能
